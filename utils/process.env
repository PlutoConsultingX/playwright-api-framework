/*import fs from 'fs';
import path from 'path';

/**
 * Load environment configuration from JSON file
 * @param {string} env - Environment name (dev, qa, prod)
 * @returns {object} - Parsed environment variables
 
export function loadEnvironment(env = 'qa') {
  const envPath = path.resolve('environments', `${env}.env.json`);

  if (!fs.existsSync(envPath)) {
    throw new Error(`Environment file not found: ${envPath}`);
  }

  console.log(`Loading environment from: ${envPath}`);
  const raw = fs.readFileSync(envPath, 'utf-8');
  return JSON.parse(raw);
}
*/

import fs from "fs";
import path from "path";

/**
 * Load environment configuration from JSON file and inject into process.env
 * @param {string} env - Environment name (dev, qa, prod)
 */
export function loadEnvironment(env = "qa") {
  const envPath = path.resolve("environments", `${env}.env.json`);

  if (!fs.existsSync(envPath)) {
    throw new Error(`Environment file not found: ${envPath}`);
  }

  console.log(`Loading environment from: ${envPath}`);
  const raw = fs.readFileSync(envPath, "utf-8");
  const config = JSON.parse(raw);

  // Inject into process.env
  for (const [key, value] of Object.entries(config)) {
    process.env[key] = value;
  }

  return config;
}
