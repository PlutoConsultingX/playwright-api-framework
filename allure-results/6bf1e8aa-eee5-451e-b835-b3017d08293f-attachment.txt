[INFO] Generating token using password grant...
[object Object]
[INFO] Token generated successfully.
DB poll attempt 1: [
  {
    "workflow_execution_id": "24b635ff-eec2-4906-aa48-03ec44e9d37e",
    "transaction_id": "0912d4b2-fd08-409c-b41a-3ab9323e59eb",
    "client_transaction_id": "870368f8-5fd2-4e0a-8321-96a93b204f25",
    "transaction_item_id": "04b4ef33-5eea-47e9-b4ac-2de5e476da5c",
    "child_workflow_execution_id": "55c5253b-11d1-3fe2-b1b2-121d2fc216e1",
    "trxBatchStatus": "In Progress",
    "trxStatus": "In progress",
    "trxItemDetailStatus": "In progress",
    "service_name": "SALARY_EFT_PAYMENTS",
    "transaction_item_detail_id": "aa3393cc-7020-4d64-ae0d-7c7e2b06cea5",
    "transaction_item_detail_run_status_name": "In progress",
    "response_manager_code": null,
    "response_manager_exception_type": null,
    "response_manager_message": null,
    "response_data": null,
    "response_reference": "f3e52c71-7145-4061-9cba-584a91783403",
    "sagrequestpayload": "{\n  \"transactionId\": \"923772bb-ba8b-42bd-b6ee-df3bd04bcfd6\",\n  \"beneficiaryAccountNumber\": \"62006677069\",\n  \"branchCode\": \"250655\",\n  \"accountType\": \"2\",\n  \"serviceType\": \"EFTPAYMENT\",\n  \"transactionType\": \"P926\",\n  \"documentType\": \"EF\",\n  \"customerName\": \"john doe\",\n  \"napsBeneficiaryCode\": \"\",\n  \"globalRecipient\": \"\",\n  \"transactionAmount\": \"300\",\n  \"actionDate\": \"2026-02-03\",\n  \"reference1\": \"SREF000-23042025\",\n  \"reference2\": \"CREF000-23042025\",\n  \"reference3\": \"\",\n  \"bicCode\": \"\",\n  \"processingOption1\": \"I\",\n  \"processingOption2\": \"S\",\n  \"mandateReference\": \"\",\n  \"collectionReoccurence\": \"OOFF\",\n  \"contractReference\": \"Thato Auto\",\n  \"emailAddress\": \"Hyphen@RMB.com\",\n  \"cellphoneNumber\": \"+27721234567\"\n}",
    "senderID": "73b2cef6-54e6-4559-b06e-8d058035b9e7",
    "transactionIDSAGReqPayload": "923772bb-ba8b-42bd-b6ee-df3bd04bcfd6",
    "response_payload_data": "{\n  \"response\": {\n    \"isInfo\": {\n      \"senderMessageId\": \"28fa2653-e44d-4a09-a96a-bfdcd5b29360\",\n      \"serviceId\": \"FACS-SALARYDAY-TRANSACTION-01\",\n      \"responseId\": \"f3e52c71-7145-4061-9cba-584a91783403\",\n      \"isCorrelationId\": \"64a82695-aa9c-4177-b994-1d3259d961d8\"\n    },\n    \"responseHeader\": {\n      \"responseTimestamp\": \"2026-02-03 11:23:45.386\",\n      \"responseType\": \"ack\",\n      \"responseCode\": \"accepted\"\n    }\n  }\n}",
    "response_type": "ack",
    "workertransactionstatus": 1,
    "sagTransresponsecode": "CREATED",
    "sagTransresponse_description": "Transaction created",
    "sagTranserrorcode": null,
    "sagTranserror_description": null,
    "callback_data": "{\n  \"isInfo\": {\n    \"senderMessageId\": \"73b2cef6-54e6-4559-b06e-8d058035b9e7\",\n    \"serviceId\": \"FACS-SALARYDAY-TRANSACTION-01\",\n    \"responseId\": \"2640e74e-a093-4a9d-a97b-f2e71b2a33f2\",\n    \"isCorrelationId\": \"916f03d6-0377-49a0-83de-e4d8ea2d768a\"\n  },\n  \"responseHeader\": {\n    \"totalCount\": 1,\n    \"responseTimestamp\": \"2026-02-03 11:23:46.270\",\n    \"clientIntegrationId\": \"HYT0002\",\n    \"clientProfile\": \"FACHYTQ1\",\n    \"responseType\": \"LOAD\",\n    \"responseCode\": \"PROCESSED\",\n    \"nativeMsgId\": \"81e64e30-a55a-4646-8a46-3637a8d5e739\"\n  },\n  \"responseDetail\": {\n    \"transactions\": [\n      {\n        \"transactionId\": \"923772bb-ba8b-42bd-b6ee-df3bd04bcfd6\",\n        \"serviceType\": \"EFTPAYMENT\",\n        \"transactionAmount\": \"100\",\n        \"effectiveDate\": \"2026-02-03\",\n        \"actionDate\": \"2026-02-03\",\n        \"nativeTransactionId\": \"P926 -EF-000000156-00000100\",\n        \"transactionResponse\": {\n          \"responseType\": \"CREATED\",\n          \"responseDescription\": \"Transaction created\"\n        },\n        \"transactionError\": {\n          \"errorCode\": \"\",\n          \"errorDescription\": \"\"\n        }\n      }\n    ]\n  }\n}"
  },
  {
    "workflow_execution_id": "24b635ff-eec2-4906-aa48-03ec44e9d37e",
    "transaction_id": "0912d4b2-fd08-409c-b41a-3ab9323e59eb",
    "client_transaction_id": "870368f8-5fd2-4e0a-8321-96a93b204f25",
    "transaction_item_id": "04b4ef33-5eea-47e9-b4ac-2de5e476da5c",
    "child_workflow_execution_id": "55c5253b-11d1-3fe2-b1b2-121d2fc216e1",
    "trxBatchStatus": "In Progress",
    "trxStatus": "In progress",
    "trxItemDetailStatus": "In progress",
    "service_name": "SALARY_EFT_PAYMENTS",
    "transaction_item_detail_id": "aa3393cc-7020-4d64-ae0d-7c7e2b06cea5",
    "transaction_item_detail_run_status_name": "In progress",
    "response_manager_code": null,
    "response_manager_exception_type": null,
    "response_manager_message": null,
    "response_data": null,
    "response_reference": "f3e52c71-7145-4061-9cba-584a91783403",
    "sagrequestpayload": "{\n  \"transactionId\": \"923772bb-ba8b-42bd-b6ee-df3bd04bcfd6\",\n  \"beneficiaryAccountNumber\": \"62006677069\",\n  \"branchCode\": \"250655\",\n  \"accountType\": \"2\",\n  \"serviceType\": \"EFTPAYMENT\",\n  \"transactionType\": \"P926\",\n  \"documentType\": \"EF\",\n  \"customerName\": \"john doe\",\n  \"napsBeneficiaryCode\": \"\",\n  \"globalRecipient\": \"\",\n  \"transactionAmount\": \"300\",\n  \"actionDate\": \"2026-02-03\",\n  \"reference1\": \"SREF000-23042025\",\n  \"reference2\": \"CREF000-23042025\",\n  \"reference3\": \"\",\n  \"bicCode\": \"\",\n  \"processingOption1\": \"I\",\n  \"processingOption2\": \"S\",\n  \"mandateReference\": \"\",\n  \"collectionReoccurence\": \"OOFF\",\n  \"contractReference\": \"Thato Auto\",\n  \"emailAddress\": \"Hyphen@RMB.com\",\n  \"cellphoneNumber\": \"+27721234567\"\n}",
    "senderID": "73b2cef6-54e6-4559-b06e-8d058035b9e7",
    "transactionIDSAGReqPayload": "923772bb-ba8b-42bd-b6ee-df3bd04bcfd6",
    "response_payload_data": "{\n  \"response\": {\n    \"isInfo\": {\n      \"senderMessageId\": \"28fa2653-e44d-4a09-a96a-bfdcd5b29360\",\n      \"serviceId\": \"FACS-SALARYDAY-TRANSACTION-01\",\n      \"responseId\": \"f3e52c71-7145-4061-9cba-584a91783403\",\n      \"isCorrelationId\": \"64a82695-aa9c-4177-b994-1d3259d961d8\"\n    },\n    \"responseHeader\": {\n      \"responseTimestamp\": \"2026-02-03 11:23:45.386\",\n      \"responseType\": \"ack\",\n      \"responseCode\": \"accepted\"\n    }\n  }\n}",
    "response_type": "ack",
    "workertransactionstatus": 1,
    "sagTransresponsecode": "CREATED",
    "sagTransresponse_description": "Transaction created",
    "sagTranserrorcode": null,
    "sagTranserror_description": null,
    "callback_data": "{\n  \"isInfo\": {\n    \"senderMessageId\": \"28fa2653-e44d-4a09-a96a-bfdcd5b29360\",\n    \"serviceId\": \"FACS-SALARYDAY-TRANSACTION-01\",\n    \"responseId\": \"b803f890-bcd4-420f-8ab9-e509c0b7e08e\",\n    \"isCorrelationId\": \"64a82695-aa9c-4177-b994-1d3259d961d8\"\n  },\n  \"responseHeader\": {\n    \"totalCount\": 1,\n    \"responseTimestamp\": \"2026-02-03 11:23:53.061\",\n    \"clientIntegrationId\": \"HYT0002\",\n    \"clientProfile\": \"FACHYTQ1\",\n    \"responseType\": \"LOAD\",\n    \"responseCode\": \"PROCESSED\",\n    \"nativeMsgId\": \"c3b7658f-7bbe-4e88-a9bb-d909dd050041\"\n  },\n  \"responseDetail\": {\n    \"transactions\": [\n      {\n        \"transactionId\": \"923772bb-ba8b-42bd-b6ee-df3bd04bcfd6\",\n        \"serviceType\": \"EFTPAYMENT\",\n        \"transactionAmount\": \"300\",\n        \"effectiveDate\": \"2026-02-03\",\n        \"actionDate\": \"2026-02-03\",\n        \"nativeTransactionId\": \"P926 -EF-000000369-00000100\",\n        \"transactionResponse\": {\n          \"responseType\": \"CREATED\",\n          \"responseDescription\": \"Transaction created\"\n        },\n        \"transactionError\": {\n          \"errorCode\": \"\",\n          \"errorDescription\": \"\"\n        }\n      }\n    ]\n  }\n}"
  }
]
Parsed callback_data (row 2): {
  isInfo: {
    senderMessageId: '28fa2653-e44d-4a09-a96a-bfdcd5b29360',
    serviceId: 'FACS-SALARYDAY-TRANSACTION-01',
    responseId: 'b803f890-bcd4-420f-8ab9-e509c0b7e08e',
    isCorrelationId: '64a82695-aa9c-4177-b994-1d3259d961d8'
  },
  responseHeader: {
    totalCount: 1,
    responseTimestamp: '2026-02-03 11:23:53.061',
    clientIntegrationId: 'HYT0002',
    clientProfile: 'FACHYTQ1',
    responseType: 'LOAD',
    responseCode: 'PROCESSED',
    nativeMsgId: 'c3b7658f-7bbe-4e88-a9bb-d909dd050041'
  },
  responseDetail: { transactions: [ [Object] ] }
}
Extracted values: {
  dbTransactionId: undefined,
  dbNativeTransactionId: undefined,
  dbSenderMessageId: undefined
}
This is the Processed to Bank payload {
  Response: {
    ISInfo: {
      serviceId: 'FACS-SALARYDAY-TRANSACTION-01',
      responseId: '{{$guid}}',
      isCorrelationId: '916f03d6-0377-49a0-83de-e4d8ea2d768a',
      senderMessageId: undefined
    },
    responseDetail: { transactions: [Array] },
    responseHeader: {
      totalCount: 1,
      responseCode: 'PROCESSED',
      responseType: 'RESPONSE',
      clientProfile: 'FACHYTQ1',
      responseTimestamp: '2026-02-03',
      nativeMsgId: '11049bd1-5fea-4bb2-b97e-0afa064ac82a',
      clientIntegrationId: 'HYT0002'
    }
  }
}
Load created Payload to send: {
  "Response": {
    "ISInfo": {
      "serviceId": "FACS-SALARYDAY-TRANSACTION-01",
      "responseId": "{{$guid}}",
      "isCorrelationId": "916f03d6-0377-49a0-83de-e4d8ea2d768a"
    },
    "responseDetail": {
      "transactions": [
        {
          "actionDate": "2026-02-03",
          "serviceType": "EFTCOLLECTION",
          "transactionError": {
            "errorCode": "",
            "errorDescription": ""
          },
          "transactionAmount": "100",
          "transactionResponse": {
            "responseType": "PROCESSED",
            "responseDescription": "Processed to bank"
          }
        }
      ]
    },
    "responseHeader": {
      "totalCount": 1,
      "responseCode": "PROCESSED",
      "responseType": "RESPONSE",
      "clientProfile": "FACHYTQ1",
      "responseTimestamp": "2026-02-03",
      "nativeMsgId": "11049bd1-5fea-4bb2-b97e-0afa064ac82a",
      "clientIntegrationId": "HYT0002"
    }
  }
}
Processed to Bank Body (from factory): {
  "Response": {
    "ISInfo": {
      "serviceId": "FACS-SALARYDAY-TRANSACTION-01",
      "responseId": "{{$guid}}",
      "isCorrelationId": "916f03d6-0377-49a0-83de-e4d8ea2d768a"
    },
    "responseDetail": {
      "transactions": [
        {
          "actionDate": "2026-02-03",
          "serviceType": "EFTCOLLECTION",
          "transactionError": {
            "errorCode": "",
            "errorDescription": ""
          },
          "transactionAmount": "100",
          "transactionResponse": {
            "responseType": "PROCESSED",
            "responseDescription": "Processed to bank"
          }
        }
      ]
    },
    "responseHeader": {
      "totalCount": 1,
      "responseCode": "PROCESSED",
      "responseType": "RESPONSE",
      "clientProfile": "FACHYTQ1",
      "responseTimestamp": "2026-02-03",
      "nativeMsgId": "11049bd1-5fea-4bb2-b97e-0afa064ac82a",
      "clientIntegrationId": "HYT0002"
    }
  }
}
Sending processed to bank Body: {
  "Response": {
    "ISInfo": {
      "serviceId": "FACS-SALARYDAY-TRANSACTION-01",
      "responseId": "{{$guid}}",
      "isCorrelationId": "916f03d6-0377-49a0-83de-e4d8ea2d768a"
    },
    "responseDetail": {
      "transactions": [
        {
          "actionDate": "2026-02-03",
          "serviceType": "EFTCOLLECTION",
          "transactionError": {
            "errorCode": "",
            "errorDescription": ""
          },
          "transactionAmount": "100",
          "transactionResponse": {
            "responseType": "PROCESSED",
            "responseDescription": "Processed to bank"
          }
        }
      ]
    },
    "responseHeader": {
      "totalCount": 1,
      "responseCode": "PROCESSED",
      "responseType": "RESPONSE",
      "clientProfile": "FACHYTQ1",
      "responseTimestamp": "2026-02-03",
      "nativeMsgId": "11049bd1-5fea-4bb2-b97e-0afa064ac82a",
      "clientIntegrationId": "HYT0002"
    }
  }
}
